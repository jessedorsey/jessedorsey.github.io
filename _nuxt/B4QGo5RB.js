import{P as I,b as y,g as w,k,i as q,e as P,c as B,o as $,r as d,j as z,h as u,m as E}from"./C-c69ZSP.js";import{u as L,o as j,a as t,s as l,n as h,d as _,l as n}from"./CIssy2MP.js";import{u as A}from"./CEGqgr6m.js";import"./CgnYQYOB.js";j({app_id:l(),api_base:t(_([n("https://api-iam.intercom.io"),n("https://api-iam.eu.intercom.io"),n("https://api-iam.au.intercom.io")])),name:t(l()),email:t(l()),user_id:t(l()),alignment:t(_([n("left"),n("right")])),horizontal_padding:t(h()),vertical_padding:t(h())});function N(c){return L("intercom",i=>({scriptInput:{src:I("https://widget.intercom.io/widget",(i==null?void 0:i.app_id)||"")},schema:void 0,scriptOptions:{use(){return{Intercom:window.Intercom}}},clientInit:()=>{window.intercomSettings=i}}),c)}const C={__name:"ScriptIntercom",props:{appId:{type:String,required:!0},apiBase:{type:String,required:!1},name:{type:String,required:!1},email:{type:String,required:!1},userId:{type:String,required:!1},alignment:{type:String,required:!1},horizontalPadding:{type:Number,required:!1},verticalPadding:{type:Number,required:!1},trigger:{type:[String,Array,Boolean],required:!1,default:"click"}},emits:["ready","error"],setup(c,{expose:i,emit:v}){const e=c,g=v,f=y(null),m=A({trigger:e.trigger,el:f}),o=y(!1),p=N({app_id:e.appId,app_base:e.apiBase,name:e.name,email:e.email,user_id:e.userId,alignment:e.alignment,horizontal_padding:e.horizontalPadding,vertical_padding:e.verticalPadding,scriptOptions:{trigger:m}}),{status:s,onLoaded:S}=p;e.trigger==="click"&&S(r=>{r.Intercom("show")}),i({intercom:p});let a;w(()=>{k(s,r=>{r==="loading"?(a=new MutationObserver(()=>{document.getElementById("intercom-frame")&&(o.value=!0,g("ready",p),a.disconnect())}),a.observe(document.body,{childList:!0,subtree:!0})):r==="error"&&g("error")})}),q(()=>{a==null||a.disconnect()});const b=P(()=>({style:{display:o.value?"none":"block",bottom:`${e.verticalPadding||20}px`,[e.alignment||"right"]:`${e.horizontalPadding||20}px`},...m instanceof Promise?m.ssrAttrs||{}:{}}));return(r,O)=>($(),B("div",E({ref_key:"rootEl",ref:f},b.value),[d(r.$slots,"default",{ready:o.value}),u(s)==="awaitingLoad"?d(r.$slots,"awaitingLoad",{key:0}):u(s)==="loading"||!o.value?d(r.$slots,"loading",{key:1}):u(s)==="error"?d(r.$slots,"error",{key:2}):z("",!0)],16))}};export{C as default};
